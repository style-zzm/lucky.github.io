(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fcfff65c"],{"09c7":function(t,a,o){"use strict";var e=o("b775"),n="/api/task/taskUserExecutes",s={list:function(t,a){return e["a"].get(n+"/"+t,a)},taskFinish:function(t,a){return e["a"].post(n+"/"+t,a)},taskInfoRollback:function(t){return e["a"].post(n+"/taskInfoRollback?taskUserExecuteId="+t)},get:function(t){return e["a"].get(n+"/"+t)},getInfos:function(t){return e["a"].get(n+"/getTaskUserExecute?taskUserExecuteId="+t)},acceptTask:function(t,a){return e["a"].post(n+"/taskInfoReceive?taskUserExecuteId="+a+"&userId="+t)},noAcceptTask:function(t,a){return e["a"].get(n+"/taskNoAcceptor?taskUserExecuteId="+a+"&userId="+t)},taskBatchAcceptor:function(t,a){return e["a"].get(n+"/taskBatchAcceptor?taskInfoIdS="+a+"&userName="+t)},complaint:function(t,a){return e["a"].post(n+"/taskDeliverTo?taskUserExecuteId="+t+"&organizationid="+a)},taskAllocation:function(t){return e["a"].post(n+"/taskAllocation",t)},taskHandleList:function(t,a){return e["a"].get(n+"/taskHandleList?userId="+t,a)},taskHasten:function(t){return e["a"].post(n+"/taskHasten?userId="+t.userId+"&taskId="+t.taskId+"&taskUserExecuteId="+t.taskUserExecuteId+"&content="+t.content)},taskUserExecuteListOrganizationPids:function(t){return e["a"].get(n+"/taskUserExecuteListOrganizationPids?organizationid="+t)}};a["a"]=s},2680:function(t,a,o){"use strict";var e=o("cd61"),n=o.n(e);n.a},"382b":function(t,a,o){"use strict";var e="http://47.97.248.6:81/excelsior/",n="http://47.97.248.6:8888/",s=0,i=1,r=2,c=3,u=4,l=5,f=6,d=7,m=8;a["a"]={baseURL:e,fileUrl:n,TASK_INFO_ZHANCUN:s,TASK_INFO_TORECEIVE:i,TASK_INFO_TOPERFORM:r,TASK_INFO_REDEPLOY:c,TASK_INFO_SPLIT:u,TASK_INFO_TOBEEVALUATED:l,TASK_INFO_BEEVALUATED:f,TASK_INFO_TONOTHING:d,TASK_INFO_SUCCESS:m}},"6b59":function(t,a,o){t.exports=o.p+"img/word.3b060ca6.svg"},"6e44":function(t,a,o){t.exports=o.p+"img/image.76b70d62.svg"},a1c8:function(t,a,o){"use strict";o.d(a,"a",function(){return e});o("28a5"),o("386d");function e(t){return null==t||void 0==t||""==t}},acb4:function(t,a,o){t.exports=o.p+"img/ppt.9eac2344.svg"},b604:function(t,a,o){t.exports=o.p+"img/excel.5b4e5e60.svg"},cd61:function(t,a,o){},dce0:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{attrs:{id:"wrapper"}},[e("div",{staticClass:"content detail-form"},[t.form.taskInfo?e("div",{staticClass:"detail-group"},[e("div",{staticClass:"detail-row"},[t._m(0),e("p",[t._v(t._s(t.form.taskInfo.code))])]),e("div",{staticClass:"detail-row"},[t._m(1),e("p",[t._v(t._s(t.form.taskInfo.taskname))])]),e("div",{staticClass:"detail-row"},[t._m(2),t.form.taskInfo.work?e("p",[t._v(t._s(t.form.taskInfo.work.name))]):t._e()]),e("div",{staticClass:"detail-row"},[t._m(3),e("p",[t._v(t._s(t.form.taskInfo.createtime))])]),e("div",{staticClass:"detail-row"},[t._m(4),e("p",[t._v(t._s(t.form.taskInfo.endtime))])]),e("div",{staticClass:"detail-row"},[t._m(5),e("p",[e("span",{staticClass:"urgent urgent3"},t._l(t.form.taskInfo.level,function(t){return e("i",{key:t,staticClass:"dot"})}),0)])]),e("div",{staticClass:"detail-row"},[t._m(6),e("p",[t._v(t._s(t.form.taskInfo.content))])])]):t._e(),e("ul",{staticClass:"mui-table-view"},[e("li",{staticClass:"mui-table-view-cell mui-collapse mui-active"},[t._m(7),t.form.taskInfo?e("div",{staticClass:"mui-collapse-content detail-group"},[t.form.taskInfo.sysFileList?e("ul",{staticClass:"appendix"},t._l(t.form.taskInfo.sysFileList,function(a,n){return e("li",{key:n},[-1!=a.name.indexOf("jpg")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("6e44")}})]):-1!=a.name.indexOf("xlsx")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("b604")}})]):-1!=a.name.indexOf("word")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("6b59")}})]):-1!=a.name.indexOf("ppt")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("acb4")}})]):-1!=a.name.indexOf("zip")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("e640")}})]):t._e(),e("p",{staticClass:"text"},[t._v(t._s(a.name))]),e("a",{staticClass:"download-btn",on:{click:function(o){return t.goDown(a.path)}}},[e("i",{staticClass:"iconfont icon-xiazai"})])])}),0):t._e()]):t._e()]),e("li",{staticClass:"mui-table-view-cell mui-collapse"},[t._m(8),e("div",{staticClass:"mui-collapse-content detail-group"},[e("ul",{staticClass:"appendix"},t._l(t.form.feedbackFileList,function(a,n){return e("li",{key:n},[-1!=a.name.indexOf("jpg")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("6e44")}})]):-1!=a.name.indexOf("xlsx")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("b604")}})]):-1!=a.name.indexOf("word")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("6b59")}})]):-1!=a.name.indexOf("ppt")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("acb4")}})]):-1!=a.name.indexOf("zip")?e("div",{staticClass:"icon"},[e("img",{attrs:{alt:"",src:o("e640")}})]):t._e(),e("p",{staticClass:"text"},[t._v(t._s(a.name))]),e("a",{staticClass:"download-btn",on:{click:function(o){return t.goDown(a.path)}}},[e("i",{staticClass:"iconfont icon-xiazai"})])])}),0)])]),e("li",{staticClass:"mui-table-view-cell mui-collapse"},[t._m(9),e("div",{staticClass:"mui-collapse-content detail-group"},[e("div",{staticClass:"time-axis clearfix"},t._l(t.form.operationRecordVoFeedbackList,function(a,o){return e("dl",{key:o,staticClass:"list"},[e("dt",[e("span",{staticClass:"date"},[t._v(t._s(a.taskOperationRecord.date))]),e("span",{staticClass:"time"},[t._v(t._s(a.taskOperationRecord.time))])]),e("dd",[e("p",[t._v(t._s(a.taskOperationRecord.content))]),e("p",[e("span",{staticClass:"executor"},[t._v("催办人：")]),t._v(t._s(a.sysUser.orgName))])])])}),0)])])])]),e("footer",{staticClass:"footer"},[e("mt-button",{staticClass:"mint-button mint-button--primary",attrs:{type:"primary"},on:{click:t.openHandleMenu}},[t._v("处理")])],1)]),t.modelVisible?e("div",{staticClass:"v-modal",staticStyle:{"z-index":"998"},on:{click:t.openHandleMenu}}):t._e(),e("div",{staticClass:"mui-popover mui-popover-bottom mui-popover-action ",attrs:{id:"download"}},[e("ul",{staticClass:"mui-table-view"},[e("li",{staticClass:"mui-table-view-cell"},[t.overdue?e("a",{staticStyle:{"font-size":"18px"}},[t._v("任务已过期")]):[t.userId==t.form.userid?[t.form.status==t.taskInfoStatus.TASK_INFO_ZHANCUN?[e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.handleAccept(t.form.id)}}},[e("i",{staticClass:"fa fa-sitemap"}),t._v("任务接受")]),e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]),e("mt-button",{attrs:{type:"danger"},on:{click:function(a){return a.stopPropagation(),t.handleNoAccept(t.form.id)}}},[e("i",{staticClass:"fa fa-mail-reply-all"}),t._v("任务拒收")])]:t._e(),t.form.status===t.taskInfoStatus.TASK_INFO_TOPERFORM||t.form.status===t.taskInfoStatus.TASK_INFO_SPLIT?[t.form.workid?[e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("任务执行")]),e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.handleExecutor(a)}}},[t._v("任务分派")])]:[e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.decomposition({pid:t.form.taskid})}}},[t._v("分解列表")])],e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.finishTask(t.form.id)}}},[t._v("任务反馈")]),e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.handleComplaint({id:t.form.id,taskname:t.form.taskInfo.taskname})}}},[t._v("任务转办")])]:t._e(),t.form.status===t.taskInfoStatus.TASK_INFO_REDEPLOY?[e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("任务执行")])]:t._e(),t.form.status===t.taskInfoStatus.TASK_INFO_TOBEEVALUATED?[e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")])]:t._e(),t.form.status===t.taskInfoStatus.TASK_INFO_BEEVALUATED?[e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("任务执行")])]:t._e(),t.form.status===t.taskInfoStatus.TASK_INFO_TONOTHING?[e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("任务执行")])]:t._e()]:t.userId==t.form.piduserid?[t.form.status==t.taskInfoStatus.TASK_INFO_ZHANCUN?[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e(),e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.urgeHan({taskId:t.form.taskid,taskname:t.form.taskInfo.taskname,taskUserExecuteId:t.form.id})}}},[t._v("任务催办")])]:t._e(),t.form.status==t.taskInfoStatus.TASK_INFO_TORECEIVE?[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e(),e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.handleComplaint({id:t.form.id,taskname:t.form.taskInfo.taskname})}}},[t._v("任务指派")])]:t._e(),t.form.status==t.taskInfoStatus.TASK_INFO_TOPERFORM?[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e(),e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.urgeHan({taskId:t.form.taskid,taskname:t.form.taskInfo.taskname,taskUserExecuteId:t.form.id})}}},[t._v("任务催办")])]:t._e(),t.form.status==t.taskInfoStatus.TASK_INFO_REDEPLOY?[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e(),e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.urgeHan({taskId:t.form.taskid,taskname:t.form.taskInfo.taskname,taskUserExecuteId:t.form.id})}}},[t._v("任务催办")])]:t._e(),t.form.status==t.taskInfoStatus.TASK_INFO_SPLIT?[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e(),e("mt-button",{attrs:{type:"primary"},on:{click:function(a){return a.stopPropagation(),t.urgeHan({taskId:t.form.taskid,taskname:t.form.taskInfo.taskname,taskUserExecuteId:t.form.id})}}},[t._v("任务催办")])]:t._e(),t.form.status==t.taskInfoStatus.TASK_INFO_TOBEEVALUATED?[e("mt-button",{attrs:{type:"primary",round:""},on:{click:function(a){return a.stopPropagation(),t.handleComment(t.form.id)}}},[t._v("任务评价")]),e("mt-button",{attrs:{type:"default",round:""},on:{click:function(a){return a.stopPropagation(),t.handleRecall({id:t.form.id,taskName:t.form.taskInfo.taskname})}}},[t._v("任务重做")])]:t._e(),t.form.status==t.taskInfoStatus.TASK_INFO_BEEVALUATED?[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e()]:t._e()]:[t.form.workid?e("mt-button",{attrs:{type:"default"},on:{click:function(a){return a.stopPropagation(),t.goPerformForm({taskId:t.form.id,workId:t.form.workid})}}},[t._v("查看名单")]):t._e()]]],2)]),e("ul",{staticClass:"mui-table-view"},[e("li",{staticClass:"mui-table-view-cell",on:{click:function(a){return a.stopPropagation(),t.openHandleMenu(a)}}},[t._m(10)])])])])},n=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-bianhao"}),t._v("任务编号")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-name"}),t._v("任务名称")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-leixing"}),t._v("任务类型")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-icon-system-fn-time"}),t._v("创建时间")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-icon-system-fn-time"}),t._v("截止时间")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-jinji"}),t._v("紧急程度")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("label",[o("i",{staticClass:"iconfont icon-neirong"}),t._v("任务内容")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("a",{staticClass:"mui-navigate-right detail-title",attrs:{href:"#"}},[o("i",{staticClass:"iconfont icon-fujian"}),t._v("总任务附件")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("a",{staticClass:"mui-navigate-right detail-title",attrs:{href:"#"}},[o("i",{staticClass:"iconfont icon-fujian"}),t._v("执行反馈任务附件")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("a",{staticClass:"mui-navigate-right detail-title",attrs:{href:"#"}},[o("i",{staticClass:"iconfont icon-jindutiao"}),t._v("任务进度")])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("span",[o("b",{staticStyle:{"font-size":"18px"}},[t._v("取消")])])}],s=(o("28a5"),o("ac6a"),o("09c7")),i=o("382b"),r=o("76a0"),c=o("a1c8"),u={name:"taskInfo",data:function(){return{end_date:"",overdue:"",id:"",userId:"",form:"",url:i["a"].fileUrl,taskInfoStatus:{TASK_INFO_ZHANCUN:i["a"].TASK_INFO_ZHANCUN,TASK_INFO_TORECEIVE:i["a"].TASK_INFO_TORECEIVE,TASK_INFO_TOPERFORM:i["a"].TASK_INFO_TOPERFORM,TASK_INFO_REDEPLOY:i["a"].TASK_INFO_REDEPLOY,TASK_INFO_SPLIT:i["a"].TASK_INFO_SPLIT,TASK_INFO_TOBEEVALUATED:i["a"].TASK_INFO_TOBEEVALUATED,TASK_INFO_BEEVALUATED:i["a"].TASK_INFO_BEEVALUATED,TASK_INFO_TONOTHING:i["a"].TASK_INFO_TONOTHING,TASK_INFO_SUCCESS:i["a"].TASK_INFO_SUCCESS},modelVisible:!1}},watch:{$route:function(){this.id=this.$route.query.id},id:function(){this.getInfo()}},created:function(){this.userId=sessionStorage.getItem("userId"),this.id=this.$route.query.id,this.end_date=new Date},mounted:function(){this.id&&this.getInfo(),this.mui.init({swipeBack:!0})},methods:{getInfo:function(){var t=this;s["a"].getInfos(this.id).then(function(a){t.form=a.data.data,t.getTimeStamp(a.data.data.taskInfo.endtime)<t.getTimeStamp(t.end_date)&&(t.overdue=!0),a.data.data.operationRecordVoFeedbackList&&a.data.data.operationRecordVoFeedbackList.forEach(function(t){var a=t.taskOperationRecord.createtime.trim().split(/\s+/);console.log(a),t.taskOperationRecord.date=a[0],t.taskOperationRecord.time=a[1]})})},getTimeStamp:function(t){var a=t,o=new Date(a),e=Date.parse(o)/1e3;return e},goDown:function(t){window.open(this.url+t)},handleAccept:function(t){var a=this;s["a"].acceptTask(this.userId,t).then(function(t){Object(r["Toast"])(t.data.message),console.log(t),a.getInfo()})},handleNoAccept:function(t){var a=this;r["MessageBox"].prompt("请输入拒收理由").then(function(o){var e=o.value;o.action;console.log(e),Object(c["a"])(e)?Object(r["Toast"])("未输入理由"):s["a"].noAcceptTask(a.userId,t,e).then(function(t){Object(r["Toast"])(t.data.message),console.log(t),a.getInfo()})})},handleExecutor:function(){this.openHandleMenu(),this.$router.push({path:"/home/taskInfo/dispatch",query:{multipleSelection:this.form.workid,taskUserExecuteId:this.form.id}})},finishTask:function(t){this.openHandleMenu(),this.$router.push({path:"/home/taskInfo/feedback",query:{id:t}})},goPerformForm:function(t){this.openHandleMenu(),this.$router.push({path:"/home/taskInfo/execute",query:{taskId:t.taskId,workId:t.workId}})},handleComplaint:function(t){this.openHandleMenu(),this.$router.push({path:"/home/taskInfo/turnHandle",query:{taskname:t.taskname,id:t.id}})},urgeHan:function(t){var a=this;r["MessageBox"].prompt("请输入催收理由").then(function(o){var e=o.value;o.action;console.log(e),Object(c["a"])(e)?Object(r["Toast"])("未输入理由"):s["a"].taskHasten({userId:a.userId,taskId:t.taskId,taskUserExecuteId:t.taskUserExecuteId,content:"催办："+e}).then(function(t){Object(r["Toast"])(t.data.message),console.log(t),a.getInfo()})})},handleComment:function(t){this.openHandleMenu(),this.$router.push({path:"/home/taskInfo/comment",query:{id:t}})},handleRecall:function(t){var a=this;this.openHandleMenu(),s["a"].taskInfoRollback(t.id).then(function(t){Object(r["Toast"])(t.data.message),console.log(t),a.getInfo()})},decomposition:function(t){this.openHandleMenu(),this.$router.push({path:"/home/taskInfo/decomposition",query:{pid:t.pid}})},openHandleMenu:function(){this.modelVisible=!this.modelVisible,this.mui("#download").popover("toggle")}}},l=u,f=(o("2680"),o("2877")),d=Object(f["a"])(l,e,n,!1,null,null,null);a["default"]=d.exports},e640:function(t,a,o){t.exports=o.p+"img/zip.87507ba6.svg"}}]);
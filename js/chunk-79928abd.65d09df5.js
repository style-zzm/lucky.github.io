(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79928abd"],{"09c7":function(t,e,a){"use strict";var s=a("b775"),i="/api/task/taskUserExecutes",n={list:function(t,e){return s["a"].get(i+"/"+t,e)},taskFinish:function(t,e){return s["a"].post(i+"/"+t,e)},taskInfoRollback:function(t){return s["a"].post(i+"/taskInfoRollback?taskUserExecuteId="+t)},get:function(t){return s["a"].get(i+"/"+t)},getInfos:function(t){return s["a"].get(i+"/getTaskUserExecute?taskUserExecuteId="+t)},acceptTask:function(t,e){return s["a"].post(i+"/taskInfoReceive?taskUserExecuteId="+e+"&userId="+t)},noAcceptTask:function(t,e){return s["a"].get(i+"/taskNoAcceptor?taskUserExecuteId="+e+"&userId="+t)},taskBatchAcceptor:function(t,e){return s["a"].get(i+"/taskBatchAcceptor?taskInfoIdS="+e+"&userName="+t)},complaint:function(t,e){return s["a"].post(i+"/taskDeliverTo?taskUserExecuteId="+t+"&organizationid="+e)},taskAllocation:function(t){return s["a"].post(i+"/taskAllocation",t)},taskHandleList:function(t,e){return s["a"].get(i+"/taskHandleList?userId="+t,e)},taskHasten:function(t){return s["a"].post(i+"/taskHasten?userId="+t.userId+"&taskId="+t.taskId+"&taskUserExecuteId="+t.taskUserExecuteId+"&content="+t.content)},taskUserExecuteListOrganizationPids:function(t){return s["a"].get(i+"/taskUserExecuteListOrganizationPids?organizationid="+t)}};e["a"]=n},2474:function(t,e,a){"use strict";var s=a("e6e4"),i=a.n(s);i.a},"382b":function(t,e,a){"use strict";var s="http://47.97.248.6:81/excelsior/",i="http://47.97.248.6:8888/",n=0,o=1,l=2,r=3,c=4,u=5,d=6,p=7,f=8;e["a"]={baseURL:s,fileUrl:i,TASK_INFO_ZHANCUN:n,TASK_INFO_TORECEIVE:o,TASK_INFO_TOPERFORM:l,TASK_INFO_REDEPLOY:r,TASK_INFO_SPLIT:c,TASK_INFO_TOBEEVALUATED:u,TASK_INFO_BEEVALUATED:d,TASK_INFO_TONOTHING:p,TASK_INFO_SUCCESS:f}},"64f5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapper"}},[a("div",{staticClass:"content detail-form"},[a("mt-navbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t.showStreetFlag?a("mt-tab-item",{attrs:{id:"1"}},[t._v("街道")]):t._e(),a("mt-tab-item",{attrs:{id:"2"}},[t._v("社区")]),t.showFlag?a("mt-tab-item",{attrs:{id:"3"}},[t._v("网格")]):t._e()],1),a("mt-tab-container",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[a("ul",{staticClass:"mui-table-view"},t._l(t.firstTabDatas,function(e,s){return a("li",{key:s,staticClass:"mui-table-view-cell mui-collapse mui-active"},[a("a",{staticClass:"mui-navigate-right detail-title",attrs:{href:"#"}},[t._v(t._s(e.areaName))]),a("div",{staticClass:"mui-collapse-content detail-group"},[a("mt-checklist",{attrs:{options:e.options},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])}),0)]),a("mt-tab-container-item",{attrs:{id:"2"}},[a("ul",{staticClass:"mui-table-view"},t._l(t.secondTabDatas,function(e,s){return a("li",{key:s,staticClass:"mui-table-view-cell mui-collapse mui-active"},[a("a",{staticClass:"mui-navigate-right detail-title",attrs:{href:"#"}},[t._v(t._s(e.areaName))]),a("div",{staticClass:"mui-collapse-content detail-group"},[a("mt-checklist",{attrs:{options:e.options},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])}),0)]),a("mt-tab-container-item",{attrs:{id:"3"}},[a("ul",{staticClass:"mui-table-view"},t._l(t.thirdTabDatas,function(e,s){return a("li",{key:s,staticClass:"mui-table-view-cell mui-collapse mui-active"},[a("a",{staticClass:"mui-navigate-right detail-title",attrs:{href:"#"}},[t._v(t._s(e.areaName))]),a("div",{staticClass:"mui-collapse-content detail-group"},[a("mt-checklist",{attrs:{options:e.options},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])}),0)])],1),a("ul",{staticClass:"department-list"},t._l(t.tableData,function(e,s){return a("li",{key:s},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"handle"},[a("el-upload",{ref:"getUpload",refInFor:!0,staticClass:"upload-demo",attrs:{action:t.url+"api/sys/files/upload",multiple:"","show-file-list":!1,"on-success":function(a,s){return t.handleImgSuccess(a,s,e.organizationId)}}},[a("mt-button",{attrs:{size:"small"}},[t._v("上传附件")]),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.executeFileList,expression:"item.executeFileList"}],staticStyle:{"padding-top":"10px"}},t._l(e.executeFileList,function(e,s){return a("li",{key:s,staticStyle:{border:"none","padding-bottom":"5px","margin-bottom":"5px"},on:{click:function(a){return a.stopPropagation(),t.preview(e.path)}}},[t._v(t._s(e.name))])}),0)],1),a("mt-button",{staticClass:"bindPeople",on:{click:function(a){return t.addPeople({taskUserExecuteId:t.taskUserExecuteId,organizationId:e.organizationId})}}},[e.detailedIds?a("mt-badge",{attrs:{size:"small"}},[t._v(t._s(e.detailedIds.length>0?e.detailedIds.length:0))]):t._e(),t._v("\n                        绑定人员清单\n                    ")],1),a("mt-button",{staticClass:"remove",on:{click:function(e){return t.deleteList(s)}}},[a("i",{staticClass:"iconfont icon-shanchu"})])],1)])}),0),a("footer",{staticClass:"footer"},[a("mt-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1),a("mt-popup",{staticClass:"select-branch",attrs:{position:"right"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[a("div",{staticClass:"popup-container"},[a("div",{staticClass:"listScroll"},[t.multiples[0]?a("ul",{staticClass:"list"},[4==t.multiples[0].relationtype?t._l(t.multiples,function(e,s){return a("li",{key:s},[a("div",{staticClass:"mui-input-row mui-checkbox mui-right"},[e.taskAssistPeople?a("h3",[t._v("\n                                        姓名：\n                                        "+t._s(e.taskAssistPeople.bankname)+"\n                                    ")]):t._e(),a("p",{staticClass:"text"},[t._v("银行卡号码："+t._s(e.taskAssistPeople.bankcard))]),a("p",[a("span",{staticClass:"publisher"},[t._v("身份证ID："+t._s(e.taskAssistPeople.id))]),a("input",{staticClass:"rdss",attrs:{name:"checkbox1",type:"checkbox"},domProps:{value:e.relationid}})])])])}):t._e(),3==t.multiples[0].relationtype?t._l(t.multiples,function(e,s){return a("li",{key:s},[a("div",{staticClass:"mui-input-row mui-checkbox mui-right"},[a("h3",[t._v("\n                                        "+t._s(e.store.name)+"\n                                    ")]),a("p",{staticClass:"text"},[t._v("负责人："+t._s(e.store.leader))]),a("p",[a("span",{staticClass:"publisher"},[t._v("房间地址："+t._s(e.store.roomAddress))]),a("input",{staticClass:"rdss",attrs:{name:"checkbox1",type:"checkbox"},domProps:{value:e.relationid}})])])])}):t._e(),2==t.multiples[0].relationtype?t._l(t.multiples,function(e,s){return a("li",{key:s},[a("div",{staticClass:"mui-input-row mui-checkbox mui-right"},[a("h3",[t._v("\n                                        "+t._s(e.room.lesseName)+"\n                                    ")]),a("p",{staticClass:"text"},[t._v("出租人联系方式："+t._s(e.room.lesseContact))]),a("p",[a("span",{staticClass:"publisher"},[t._v("房屋地址："+t._s(e.room.roomAddress))]),a("input",{staticClass:"rdss",attrs:{name:"checkbox1",type:"checkbox"},domProps:{value:e.relationid}})])])])}):t._e(),1==t.multiples[0].relationtype?t._l(t.multiples,function(e,s){return a("li",{key:s},[a("div",{staticClass:"mui-input-row mui-checkbox mui-right"},[a("h3",[t._v("\n                                        "+t._s(e.peopleBase.name)+"\n                                    ")]),a("p",{staticClass:"text"},[t._v("身份证号码："+t._s(e.peopleBase.idCard))]),a("p",[a("span",{staticClass:"联系号码"},[t._v("居住地址："+t._s(e.peopleBase.contact))]),a("input",{staticClass:"rdss",attrs:{name:"checkbox1",type:"checkbox"},domProps:{value:e.relationid}})])])])}):t._e()],2):t._e()])]),a("div",{staticClass:"btn-group"},[a("mt-button",[t._v("重置")]),a("mt-button",{attrs:{type:"primary"},on:{click:t.getVal}},[t._v("确定")])],1)])],1)])},i=[],n=(a("7f7f"),a("28a5"),a("ac6a"),a("5df3"),a("f400"),a("f034")),o=a("c72e"),l=a("09c7"),r=a("b775"),c="/api/sys/files",u={upload:function(t){return r["a"].get(c+"/upload",t)}},d=u,p=a("382b"),f=a("76a0"),h={name:"dispatch",data:function(){return{firstTabDatas:"",secondTabDatas:"",thirdTabDatas:"",selected:"1",value:[],showFlag:!0,showStreetFlag:!0,tableData:[],taskUserExecuteId:"",popupVisible:!1,multiples:[],query:{pageNum:0,pageSize:10,total:0},organizationId:"",url:p["a"].baseURL}},created:function(){this.areaCode=sessionStorage.getItem("areaCode"),this.taskUserExecuteId=this.$route.query.taskUserExecuteId},mounted:function(){this.areaCode.length<=9&&(this.showFlag=!1),this.areaCode.length>9&&(this.showStreetFlag=!1,this.selected="2"),this.getFirstInfos(),this.getSecondInfos(),this.getThirdInfos()},watch:{value:function(t,e){var a=this,s=new Map,i=new Map,n=new Map;this.tableData.forEach(function(t){i.set(t.organizationId,t.finishfiles),n.set(t.organizationId,t.executeFileList),s.set(t.organizationId,t.detailedIds)}),this.tableData=[],t.forEach(function(t){var e=t.split(","),o={organizationId:e[0],name:e[1],finishfiles:i.get(e[0]),executeFileList:n.get(e[0]),detailedIds:s.get(e[0])};a.tableData.push(o)})}},methods:{getFirstInfos:function(){var t=this;n["a"].getInfos(this.areaCode,"4").then(function(e){t.firstTabDatas=e.data.data})},getSecondInfos:function(){var t=this;n["a"].getInfos(this.areaCode,"5").then(function(e){console.log(e.data.data),t.secondTabDatas=e.data.data,e.data.data&&e.data.data.forEach(function(t){t.options=[],t.orgList.forEach(function(e){var a={label:e.orgName,value:e.id+","+e.orgName};t.options.push(a)})})})},getThirdInfos:function(){var t=this;n["a"].getInfos(this.areaCode,"6").then(function(e){t.thirdTabDatas=e.data.data,e.data.data&&e.data.data.forEach(function(t){t.options=[],t.orgList.forEach(function(e){var a={label:e.orgName,value:e.id+","+e.orgName};t.options.push(a)})})})},deleteList:function(t){this.value.splice(t,1)},addPeople:function(t){var e=this;console.log(t),o["a"].getPeopleInfo(t.taskUserExecuteId,t.organizationId).then(function(t){console.log(t.data.data.pageList),e.multiples=t.data.data.pageList.records}),this.popupVisible=!0,this.organizationId=t.organizationId},getVal:function(){var t=this,e=this.getcheckBoxRes("rdss");if(e.length<1)return this.mui.toast("请选择"),!1;console.log(e),this.tableData.forEach(function(a){t.organizationId==a.organizationId&&(a.detailedIds=e)}),this.popupVisible=!1},getcheckBoxRes:function(t){for(var e=document.getElementsByClassName(t),a=new Array,s=0,i=0;i<e.length;i++)e[i].checked&&(a[s]=e[i].value,s++,e[i].checked=!1);return a},tirggerFile:function(t){var e=t.target.files;console.log(e),d.upload(e[0]).then(function(t){console.log(t)})},submit:function(){var t=this,e={taskAllocationList:this.tableData,taskUserExecuteId:this.taskUserExecuteId};console.log(e),l["a"].taskAllocation(e).then(function(e){console.log(e),Object(f["Toast"])(e.data.message),t.$router.go(-1)})},handleImgSuccess:function(t,e,a){var s=this;console.log(a),console.log(t),console.log("组织id");e={name:e.name,path:t.data.url};this.tableData.forEach(function(i){i.organizationId==a&&(i.finishfiles?i.finishfiles=i.finishfiles+t.data.url+",":i.finishfiles=t.data.url+",",i.executeFileList||s.$set(i,"executeFileList",[]),i.executeFileList.push(e))})}}},m=h,g=(a("2474"),a("2877")),v=Object(g["a"])(m,s,i,!1,null,"48344afb",null);e["default"]=v.exports},c72e:function(t,e,a){"use strict";var s=a("b775"),i="/api/task/taskWorkExecuteDetaileds",n={list:function(t){return s["a"].get(i+"/",t)},get:function(){return s["a"].get(i+"/",params)},getPeopleInfo:function(t,e){return s["a"].get(i+"/findTaskWorkExecuteDetailedListBo?taskUserExecuteId="+t+"&organizationId="+e)},updateIsWrite:function(t){return s["a"].post(i+"/executeDetailedIsWrite",t)}};e["a"]=n},e6e4:function(t,e,a){},f034:function(t,e,a){"use strict";var s=a("b775"),i="/api/sys/sysOrganizations",n={list:function(t){return s["a"].get(i+"/",t)},get:function(t){return s["a"].get(i+"/"+t)},save:function(t){return s["a"].post(i+"/",t)},delete:function(t){return s["a"].delete(i+"/"+t)},getParentList:function(t,e){return s["a"].get(i+"/"+t+"/parentList",{startLevel:e})},getParentPath:function(t,e,a){return s["a"].get(i+"/"+t+"/parentPath",{startLevel:e,splitSymbol:a})},getChildList:function(t,e){return s["a"].get(i+"/"+t+"/childList",{depth:e})},getRootList:function(t){return s["a"].get(i+"/rootList",{rootId:t})},getInfos:function(t,e){return s["a"].get(i+"/area/"+t+"?type="+e)}};e["a"]=n}}]);
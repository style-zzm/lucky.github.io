(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44ce1696"],{"1b15":function(t,s,e){},"382b":function(t,s,e){"use strict";var a="http://47.97.248.6:81/excelsior/",i="http://47.97.248.6:8888/",o=0,n=1,r=2,l=3,c=4,u=5,d=6,_=7,f=8;s["a"]={baseURL:a,fileUrl:i,TASK_INFO_ZHANCUN:o,TASK_INFO_TORECEIVE:n,TASK_INFO_TOPERFORM:r,TASK_INFO_REDEPLOY:l,TASK_INFO_SPLIT:c,TASK_INFO_TOBEEVALUATED:u,TASK_INFO_BEEVALUATED:d,TASK_INFO_TONOTHING:_,TASK_INFO_SUCCESS:f}},"4f10":function(t,s,e){"use strict";var a=e("b775"),i="/api/matter/forms",o={get:function(t){return a["a"].get(i+"/",t)},getFromByMatterId:function(t){return a["a"].get(i+"/form/".concat(t))}};s["a"]=o},b604:function(t,s,e){t.exports=e.p+"img/excel.5b4e5e60.svg"},c72e:function(t,s,e){"use strict";var a=e("b775"),i="/api/task/taskWorkExecuteDetaileds",o={list:function(t){return a["a"].get(i+"/",t)},get:function(){return a["a"].get(i+"/",params)},getPeopleInfo:function(t,s){return a["a"].get(i+"/findTaskWorkExecuteDetailedListBo?taskUserExecuteId="+t+"&organizationId="+s)},updateIsWrite:function(t){return a["a"].post(i+"/executeDetailedIsWrite",t)}};s["a"]=o},e843:function(t,s,e){"use strict";var a=e("1b15"),i=e.n(a);i.a},f2d6:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"wrapper"}},[a("div",{staticClass:"content detail-form"},[t.infos.taskInfo?a("div",{staticClass:"detail-group"},[a("div",{staticClass:"detail-row"},[t._m(0),a("p",[t._v(t._s(t.infos.taskInfo.code))])]),a("div",{staticClass:"detail-row"},[t._m(1),a("p",[t._v(t._s(t.infos.taskInfo.taskname))])]),a("div",{staticClass:"detail-row"},[t._m(2),a("p",[t.infos.taskInfo.work?a("span",[t._v(t._s(t.infos.taskInfo.work.name))]):t._e()])]),a("div",{staticClass:"detail-row"},[t._m(3),a("p",[t._v(t._s(t.infos.createtime))])]),a("div",{staticClass:"detail-row"},[t._m(4),a("p",[t._v(t._s(t.infos.taskInfo.endtime))])]),a("div",{staticClass:"detail-row"},[t._m(5),a("p",[a("span",{staticClass:"urgent urgent3"},t._l(t.infos.taskInfo.level,function(t){return a("i",{key:t,staticClass:"dot"})}),0)])]),a("div",{staticClass:"detail-row"},[t._m(6),a("p",[a("mt-progress",{staticStyle:{"line-height":"1.5",width:"100%"},attrs:{value:t.rate}})],1)]),a("div",{staticClass:"detail-row"},[t._m(7),a("p",{staticStyle:{"line-height":"3"}},[t._v(t._s(t.completion)+"/"+t._s(t.total))])])]):t._e(),a("div",{staticClass:"detail-box"},[t._m(8),a("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,"auto-fill":!1},on:{"bottom-status-change":t.handleBottomChange}},[0!=t.items.length?a("ul",{staticClass:"list"},[t.items.length>0&&1==t.items[0].relationtype?t._l(t.items,function(s,e){return a("li",{key:e},[a("a",{staticClass:"mui-navigate-right"},[a("h3",[t._v(t._s(s.peopleBase.name))]),a("p",{staticClass:"isWrite"},[a("span",{class:t.setClass(s.iswrite)},[t._v(t._s(t.getIswriteType(s.iswrite)))])]),a("p",{staticClass:"text"},[t._v("身份证"),a("span",[t._v(t._s(s.peopleBase.idCard))])]),a("p",{staticClass:"text"},[t._v("联系电话"),a("span",[t._v(t._s(s.peopleBase.contact))])]),a("div",{staticClass:"executeBtn"},[t.infos.status!==t.taskInfoStatus.TASK_INFO_TOPERFORM&&t.infos.status!==t.taskInfoStatus.TASK_INFO_SPLIT||t.userId!=s.userid?[a("mt-button",{attrs:{size:"small"},on:{click:function(e){return e.stopPropagation(),t.goPeople(s,2)}}},[t._v("查看")])]:[a("mt-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goPeople(s,null)}}},[t._v("执行")])]],2)])])}):t._e(),t.items.length>0&&2==t.items[0].relationtype?t._l(t.items,function(s,e){return a("li",{key:e},[a("a",{staticClass:"mui-navigate-right"},[a("h3",[t._v(t._s(s.room.lesseName))]),a("p",{staticClass:"isWrite"},[a("span",{class:t.setClass(s.iswrite)},[t._v(t._s(t.getIswriteType(s.iswrite)))])]),a("p",{staticClass:"text"},[t._v("房屋地址"),a("span",[t._v(t._s(s.room.roomAddress))])]),a("p",{staticClass:"text"},[t._v("联系电话"),a("span",[t._v(t._s(s.room.lesseContact))])]),a("div",{staticClass:"executeBtn"},[t.infos.status!==t.taskInfoStatus.TASK_INFO_TOPERFORM&&t.infos.status!==t.taskInfoStatus.TASK_INFO_SPLIT||t.userId!=s.userid?[a("mt-button",{attrs:{size:"small"},on:{click:function(e){return e.stopPropagation(),t.goPeople(s,2)}}},[t._v("查看")])]:[a("mt-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goPeople(s,null)}}},[t._v("执行")])]],2)])])}):t._e(),t.items.length>0&&3==t.items[0].relationtype?t._l(t.items,function(s,e){return a("li",{key:e},[a("a",{staticClass:"mui-navigate-right"},[a("h3",[t._v(t._s(s.store.name))]),a("p",{staticClass:"isWrite"},[a("span",{class:t.setClass(s.iswrite)},[t._v(t._s(t.getIswriteType(s.iswrite)))])]),a("p",{staticClass:"text"},[t._v("负责人"),a("span",[t._v(t._s(s.store.leader))])]),a("p",{staticClass:"text"},[t._v("联系电话"),a("span",[t._v(t._s(s.store.leaderContact))])]),a("div",{staticClass:"executeBtn"},[t.infos.status!==t.taskInfoStatus.TASK_INFO_TOPERFORM&&t.infos.status!==t.taskInfoStatus.TASK_INFO_SPLIT||t.userId!=s.userid?[a("mt-button",{attrs:{size:"small"},on:{click:function(e){return e.stopPropagation(),t.goPeople(s,2)}}},[t._v("查看")])]:[a("mt-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goPeople(s,null)}}},[t._v("执行")])]],2)])])}):t._e(),t.items.length>0&&4==t.items[0].relationtype?t._l(t.items,function(s,e){return a("li",{key:e},[a("a",{staticClass:"mui-navigate-right"},[a("h3",[t._v(t._s(s.taskAssistPeople.bankname))]),a("p",{staticClass:"isWrite"},[a("span",{class:t.setClass(s.iswrite)},[t._v(t._s(t.getIswriteType(s.iswrite)))])]),a("p",{staticClass:"text"},[t._v("身份证"),a("span",[t._v(t._s(s.taskAssistPeople.id))])]),a("p",{staticClass:"text"},[t._v("银行卡号"),a("span",[t._v(t._s(s.taskAssistPeople.bankcard))])]),a("div",{staticClass:"executeBtn"},[t.infos.status!==t.taskInfoStatus.TASK_INFO_TOPERFORM&&t.infos.status!==t.taskInfoStatus.TASK_INFO_SPLIT||t.userId!=s.userid?[a("mt-button",{attrs:{size:"small"},on:{click:function(e){return e.stopPropagation(),t.goPeople(s,2)}}},[t._v("查看")])]:[a("mt-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goPeople(s,null)}}},[t._v("执行")])]],2)])])}):t._e(),t.allLoaded?a("div",{staticClass:"data-none"},[t._v("没有更多数据了")]):t._e(),a("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.bottomStatus,expression:"bottomStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.bottomStatus}},[t._v("↑")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[a("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:"loading"==t.bottomStatus,expression:"bottomStatus == 'loading'"}],attrs:{color:"#26a2ff"}})],1)])],2):t._e()])],1),t.infos.taskInfo?[t.infos.taskInfo.form?a("div",{staticClass:"detail-box btns"},[t.infos.taskInfo.form.jsontemplateId?a("div",[t.matterInfo.issource?t._e():[a("mt-button",{on:{click:t.goFillFormConfig}},[t._v("执行")]),a("mt-button",{on:{click:function(s){t.popupVisible=!0}}},[t._v("导出")])]],2):t._e()]):t._e()]:t._e(),a("mt-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(s){t.popupVisible=s},expression:"popupVisible"}},[t.infos.taskInfo?a("ul",{staticClass:"appendix upload-list",staticStyle:{padding:"15px"}},[t.infos.taskInfo.work?t._l(t.infos.taskInfo.work.forms,function(s){return a("li",{key:s.url},[a("div",{staticClass:"icon"},[a("img",{attrs:{alt:"",src:e("b604")}})]),a("div",{staticClass:"text"},[t._v(t._s(s.name))]),a("i",{staticClass:"iconfont icon-xiazai",on:{click:function(e){return t.exportDownloadFile(s.name)}}})])}):t._e()],2):t._e()])],2),a("footer",{staticClass:"footer"},[a("button",{staticClass:"mint-button mint-button--default",on:{click:function(s){return t.viewMatterConfig()}}},[t._v("查看事项资料")])])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-bianhao"}),t._v("任务编号")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-name"}),t._v("任务名称")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-leixing"}),t._v("工作名称")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-icon-system-fn-time"}),t._v("创建时间")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-icon-system-fn-time"}),t._v("截止时间")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-jinji"}),t._v("紧急程度")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-neirong"}),t._v("任务完成率")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("label",[e("i",{staticClass:"iconfont icon-neirong"}),t._v("已执行数量/总数量")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"detail-title"},[e("i",{staticClass:"iconfont icon-maillist"}),t._v("执行名单")])}],o=e("c72e"),n=e("4f10"),r=e("382b"),l={name:"execute",data:function(){return{userId:"",taskId:"",workId:"",completion:"",total:"",rate:"",items:"",infos:"",query:{pageNum:0,pageSize:10,total:0},allLoaded:!1,bottomStatus:"",taskInfoStatus:{TASK_INFO_ZHANCUN:r["a"].TASK_INFO_ZHANCUN,TASK_INFO_TORECEIVE:r["a"].TASK_INFO_TORECEIVE,TASK_INFO_TOPERFORM:r["a"].TASK_INFO_TOPERFORM,TASK_INFO_REDEPLOY:r["a"].TASK_INFO_REDEPLOY,TASK_INFO_SPLIT:r["a"].TASK_INFO_SPLIT,TASK_INFO_TOBEEVALUATED:r["a"].TASK_INFO_TOBEEVALUATED,TASK_INFO_BEEVALUATED:r["a"].TASK_INFO_BEEVALUATED,TASK_INFO_TONOTHING:r["a"].TASK_INFO_TONOTHING,TASK_INFO_SUCCESS:r["a"].TASK_INFO_SUCCESS},matterInfo:{},popupVisible:!1,taskUserExecuteId:""}},created:function(){var t=this;this.userId=sessionStorage.getItem("userId"),this.taskId=this.$route.query.taskId,this.workId=this.$route.query.workId,n["a"].getFromByMatterId(this.workId).then(function(s){t.matterInfo=s.data.data||{}})},mounted:function(t){this.taskUserExecuteId=this.$route.query.taskId,this.getList()},watch:{$route:function(){this.getList()}},methods:{getList:function(){var t=this;o["a"].getPeopleInfo(this.$route.query.taskId).then(function(s){console.log(s.data.data),t.completion=s.data.data.count||0,t.total=s.data.data.pageList.total,0!=s.data.data.pageList.total?t.rate=t.completion/t.total*100:t.rate=0,t.items=s.data.data.pageList.records||[],s.data.data.taskUserExecute.taskInfo.work.forms&&(s.data.data.taskUserExecute.taskInfo.work.forms=JSON.parse(s.data.data.taskUserExecute.taskInfo.work.forms)),t.infos=s.data.data.taskUserExecute,t.query.pageNum=s.data.data.pageList.current,t.query.pageSize=s.data.data.pageList.size,t.query.total=s.data.data.pageList.total,s.data.data.records?s.data.data.records.length<s.data.data.size&&(t.allLoaded=!0,t.$refs.loadmore.onBottomLoaded()):(t.allLoaded=!0,t.$refs.loadmore.onBottomLoaded()),t.handleBottomChange("loadingEnd")})},getIswriteType:function(t){if(0===t)return"未填写";if(this.isStringEmpty(t))return"";switch(t){case 1:return"已填写";default:return""}},setClass:function(t){if(0===t)return"el-tag el-tag--warning";if(this.isStringEmpty(t))return"";switch(t){case 1:return"el-tag el-tag--success";default:return""}},handleBottomChange:function(t){this.bottomStatus=t},loadBottom:function(){this.handleBottomChange("loading"),this.query.pageNum++,this.getList()},viewMatterConfig:function(){console.log("---------"+this.$route.query.workId),this.$router.push({path:"/home/taskInfo/mattersInformation",query:{workid:this.$route.query.workId,taskId:this.$route.query.taskId}})},goPeople:function(t,s){var e=t.form.pagePath,a={taskid:t.taskid,workid:t.workid,userExecuteid:t.userExecuteid,backTo:s,relationid:t.relationid};console.log({path:e,query:a}),this.$router.push({path:e,query:a})},goFillFormConfig:function(){var t={taskid:this.taskId,workid:this.workId,taskUserExecuteId:this.taskUserExecuteId,backTo:!1,relationid:null};this.$router.push({path:this.matterInfo.pagePath,query:t})},exportDownloadFile:function(t){window.open("http://192.168.1.163:8080/excelsior/api/task/taskWorkExecuteStorages/export/formExport?taskUserExecuteId="+this.taskUserExecuteId+"&formName="+t,"_blank")},isStringEmpty:function(t){return 0===t||!t}}},c=l,u=(e("e843"),e("2877")),d=Object(u["a"])(c,a,i,!1,null,"e4c65a0e",null);s["default"]=d.exports}}]);